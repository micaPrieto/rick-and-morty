<div class="profile-card">
  <!-- Header with Avatar -->
  <div class="card-header-custom">
    <div class="avatar-container">
      <!-- Usuario con imagen -->
      <img
        *ngIf="user()?.profileImage"
        class="avatar-image"
        style="width: 180px; height: 180px;"
        [src]="getProfileImageUrl(user()!.profileImage!)"
        alt="Usuario"
        (error)="onImageError($event)"
      />

      <!-- Avatar por defecto -->
      <img
        *ngIf="!user()?.profileImage"
        class="avatar-image"
        style="width: 180px; height: 180px;"
        src="assets/default-avatar2.jpg"
        alt="Usuario"
      />

      <!-- Overlay para hover effect -->
      <div class="avatar-overlay" (click)="toggleImageUpload()">
        <i class="fas fa-camera text-white"></i>
      </div>
    </div>

    <h2 class="profile-title">{{ user()?.fullName }}</h2>
    <span class="status-badge status-active">Activo</span>

    <!-- Action Buttons -->
    <div class="btn-group-custom">
      <button
        class="btn btn-secondary-custom"
        (click)="toggleImageUpload()"
      >
        <i class="fas fa-camera me-1"></i>
        Editar foto
      </button>

      <button
        class="btn btn-primary-custom"
        routerLink="/edit-profile"
      >
        <i class="fas fa-user-edit me-1"></i>
        Editar perfil
      </button>
    </div>

    <!-- Upload Area -->
    <div *ngIf="showImageInput" class="upload-area">
      <i class="fas fa-cloud-upload-alt mb-2 text-white-50"></i>
      <input
        type="file"
        (change)="onFileSelected($event)"
        class="file-input-custom w-100"
        accept="image/*"
      />
    </div>
  </div>

  <!-- Body with Information -->
  <div class="card-body-custom">
    <ul class="profile-info-list">
      <li class="info-item">
        <i class="fas fa-envelope info-icon"></i>
        <span class="info-label">Email:</span>
        <div class="info-value">{{ user()?.email }}</div>
      </li>

      <li class="info-item">
        <i class="fas fa-birthday-cake info-icon"></i>
        <span class="info-label">Nacimiento:</span>
        <div class="info-value" *ngIf="user()?.birthday; else noBirthday">
          {{ getFormattedBirthday() }}
        </div>
        <ng-template #noBirthday>
          <div class="info-value">-</div>
        </ng-template>
      </li>

      <li class="info-item">
        <i class="fas fa-map-marker-alt info-icon"></i>
        <span class="info-label">Ubicaci√≥n:</span>
        <div class="info-value">{{ getFormattedAddress() }}</div>
      </li>
    </ul>
  </div>
</div>
